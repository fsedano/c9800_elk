{
  "$schema": "https://vega.github.io/schema/vega-lite/v2.json",
  "title": "Event counts from all indexes",
  "data": {
    "url": {
      "%context%": true,
      "%timefield%": "@timestamp",
      "index": "_all",
    },
    "format": {"property": "hits.hits"}
  },

  transform: [
    {
    calculate: "toDate(datum._source['@timestamp'])"
    as: "time"
    }
  ]
  
  "mark": {
    "type": "line",
    "point": {
      "filled": false,
      "size": 1000
    },
    "interpolate":"step-before"
  },
  "encoding": {
    "x": {
      "timeUnit": "yearmonthdatehoursminutesecondsmilliseconds",
      "field": "time",
      "type": "ordinal",
      "axis": {"title": false,
      "labelAngle":-45}
    },

    "y": {
      "field": "_source.current_ap",
      "type": "ordinal"
    }
    "tooltip": [
      {"field": "_source.event_type", "type": "nominal"}
      ]
    "shape": {
      "field": "_source.event_type",
      "type": "nominal",
      "legend": { title: 'event type'}
    }
    "color": {
      "field": "_source.client_mac",
      "type": "nominal",
      "legend": { title: 'Client MAC'}
    }
  }
}